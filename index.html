<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />

    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-G58S8NL2BQ"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "G-G58S8NL2BQ");
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <title>
      ã€ãƒœã‚¤ã‚¹å†ç”Ÿã€‘ãƒ–ãƒ­ã‚¹ã‚¿ã‚»ãƒªãƒ•é›†ï½œå…¨91ã‚­ãƒ£ãƒ©å¯¾å¿œï¼ˆé †æ¬¡æ›´æ–°ä¸­ï¼‰ï½œLexie
    </title>
    <meta
      name="description"
      content="ã€è´ã‘ã‚‹ã‚»ãƒªãƒ•é›†ã€‘ãƒ–ãƒ­ã‚¹ã‚¿ã‚­ãƒ£ãƒ©ã®è‹±èªãƒœã‚¤ã‚¹ã‚’å’Œè¨³ãƒ»è§£èª¬ï¼ãƒ€ãƒªãƒ«ãªã©äººæ°—ã‚­ãƒ£ãƒ©ã‹ã‚‰æœ€æ–°ã‚­ãƒ£ãƒ©ã¾ã§ã€éŸ³å£°ä»˜ãã§æ¥½ã—ãè‹±èªå­¦ç¿’ã€‚ã‚»ãƒªãƒ•ãƒ‡ãƒ¼ã‚¿ã¯éšæ™‚è¿½åŠ ãƒ»æ›´æ–°ä¸­ï¼"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap"
      rel="stylesheet"
    />

    <link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <link rel="shortcut icon" href="/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-title" content="Lexie" />
    <link rel="manifest" href="/site.webmanifest" />

    <style>
      /* åŸºæœ¬çš„ãªãƒªã‚»ãƒƒãƒˆ */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      /* ===== ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆã®ãŸã‚ã®CSSå¤‰æ•°å®šç¾© ===== */
      :root {
        /* â–¼ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ†ãƒ¼ãƒï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰ã®è‰²è¨­å®š */
        --bg-color: #121212;
        --surface-color: #1f1f1f;
        --surface-color-light: #2a2a2a;
        --border-color: #333;
        --border-color-light: #444;
        --text-primary: #e0e0e0;
        --text-secondary: #b0b0b0;
        --text-tertiary: #888;
        --accent-primary: #00d1ff; /* ãƒ¡ã‚¤ãƒ³ã®æ°´è‰² */
        --accent-primary-hover: #00a8cc;
        --accent-secondary: #ff4d4d; /* ã‚µãƒ–ã®èµ¤ */
        --btn-text: #121212;
        --shadow-color: rgba(0, 209, 255, 0.15);
        --shadow-color-btn: rgba(0, 209, 255, 0.4);
        --quote-jp-color: #b0b0b0;
        /* èƒŒæ™¯ç”»åƒè¨­å®š */
        --hero-bg: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)),
          url("https://amphibian333.github.io/webã‚µã‚¤ãƒˆç”¨å£ç´™.png") no-repeat
            center center/cover;
        --hero-search-bg: rgba(31, 31, 31, 0.8);
        --btn-in-box-hover-bg: rgba(255, 255, 255, 0.05);
        /* æ–°æ©Ÿèƒ½ç”¨ã®å¤‰æ•° */
        --beta-bar-bg: #ffc107;
        --beta-bar-text: #121212;
      }

      body.light-theme {
        /* ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ç”¨ã®èƒŒæ™¯è¨­å®š */
        --hero-bg: linear-gradient(
            rgba(255, 255, 255, 0.4),
            rgba(255, 255, 255, 0.4)
          ),
          url("https://amphibian333.github.io/webã‚µã‚¤ãƒˆç”¨å£ç´™.png") no-repeat
            center center/cover;
        --hero-search-bg: rgba(255, 255, 255, 0.9);

        --bg-color: #f8f9fa;
        --surface-color: #ffffff;
        --surface-color-light: #f1f3f5;
        --border-color: #dee2e6;
        --border-color-light: #ced4da;
        --text-primary: #212529;
        --text-secondary: #495057;
        --text-tertiary: #868e96;
        --accent-primary: #ff4d4d;
        --accent-primary-hover: #e63939;
        --accent-secondary: #ff914d;
        --btn-text: #ffffff;
        --shadow-color: rgba(255, 77, 77, 0.2);
        --shadow-color-btn: rgba(255, 77, 77, 0.4);
        --quote-jp-color: #495057;
      }

      /* ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æ¤œç´¢çª“ */
      #hero .search-container #brawler-search {
        border: 3px solid var(--accent-primary);
        box-shadow: 0 0 20px var(--shadow-color);
        background-color: rgba(31, 31, 31, 0.8);
        backdrop-filter: blur(5px);
      }

      /* ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ */
      #hero .search-filters select {
        background-color: var(--hero-search-bg);
        border: 2px solid var(--accent-primary);
        color: var(--text-primary);
        font-weight: bold;
      }

      @media (max-width: 600px) {
        #hero h2 {
          font-size: 1.8em;
        }
        #brawler-search {
          font-size: 1em !important;
          height: 50px !important;
        }
      }

      html {
        background-color: var(--bg-color);
        scroll-behavior: smooth;
      }
      body {
        font-family: "Roboto", "Noto Sans JP", sans-serif;
        background-color: var(--bg-color);
        color: var(--text-primary);
        line-height: 1.7;
        font-weight: 400;
        overflow-x: hidden;
        transition: background-color 0.3s, color 0.3s;
      }

      main {
        background-color: var(--bg-color);
      }
      .container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px 0;
      }
      #beta-banner {
        background-color: var(--beta-bar-bg);
        color: var(--beta-bar-text);
        text-align: center;
        padding: 8px 10px;
        font-weight: 700;
        font-size: 0.9em;
        width: 100%;
      }

      header {
        background-color: var(--surface-color);
        padding: 0;
        border-bottom: 3px solid var(--accent-primary);
        position: sticky;
        top: 0;
        z-index: 1000;
        transition: background-color 0.3s, border-color 0.3s;
        display: flex;
        flex-direction: column;
      }
      .header-nav-container {
        width: 90%;
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
      }
      header h1 {
        font-size: 2.2em;
        color: var(--accent-primary);
        text-transform: uppercase;
        letter-spacing: 2px;
        margin-bottom: 10px;
        font-weight: 700;
        transition: color 0.3s;
      }
      /* â–¼â–¼â–¼ ä¿®æ­£2ï¼šãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ3åˆ—ä¸¦ã³æ­»å®ˆè¨­å®šï¼‰ â–¼â–¼â–¼ */

      header nav ul {
        list-style: none;
        display: flex;
        flex-wrap: nowrap !important; /* â˜…é‡è¦ï¼šçµ¶å¯¾ã«æŠ˜ã‚Šè¿”ã•ãªã„ï¼ */
        justify-content: center; /* çœŸã‚“ä¸­ã«å¯„ã›ã‚‹ */
        align-items: center;
        padding: 0;
        margin: 0;
        width: 100%;
        white-space: nowrap; /* æ–‡å­—è‡ªä½“ã®æŠ˜ã‚Šè¿”ã—ã‚‚ç¦æ­¢ */
      }

      header nav ul li {
        margin: 0 5px; /* â˜…æ¨ªã®é–“éš”ã‚’èª¿æ•´ï¼ˆä»¥å‰ã¯å·¦15pxã ã£ãŸã®ã‚’å·¦å³å‡ç­‰ã«ç‹­ãï¼‰ */
        flex-shrink: 0; /* â˜…ç”»é¢ãŒç‹­ããªã£ã¦ã‚‚ãƒœã‚¿ãƒ³ã‚’æ½°ã•ãªã„ */
        margin-bottom: 0 !important; /* ç¸¦ã®ä½™ç™½ã‚’å‰Šé™¤ */
      }

      header nav ul li a {
        color: var(--text-primary);
        text-decoration: none;
        font-size: 1em;
        transition: color 0.3s ease, background-color 0.3s ease;
        padding: 8px 12px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: 700;
        display: inline-block;
      }

      /* â˜…ã‚¹ãƒãƒ›ç”¨ï¼šç”»é¢ãŒç‹­ã„æ™‚ã®å¼·åŠ›ãªè£œæ­£ */
      @media (max-width: 600px) {
        header nav ul li {
          margin: 0 2px; /* ãƒœã‚¿ãƒ³åŒå£«ã®éš™é–“ã‚’ã‚®ãƒªã‚®ãƒªã¾ã§è©°ã‚ã‚‹ */
        }
        header nav ul li a {
          font-size: 0.85em; /* æ–‡å­—ã‚’å°‘ã—å°ã•ãã—ã¦3ã¤åã‚ã‚‹ */
          padding: 8px 8px; /* ãƒœã‚¿ãƒ³ã®å†…å´ã®ä½™ç™½ã‚‚å‰Šã‚‹ */
        }
      }
      /* â–²â–²â–² ã“ã“ã¾ã§æ›¸ãæ›ãˆ â–²â–²â–² */
      header nav ul li a:hover,
      header nav ul li a.active {
        color: var(--btn-text);
        background-color: var(--accent-primary);
      }

      #hero {
        background: var(--hero-bg);
        min-height: 80vh;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
      }
      #hero .container {
        width: 100%;
        max-width: 700px;
        padding: 20px;
      }
      #hero h2 {
        font-size: 2.5em;
        margin-bottom: 30px;
        color: #fff;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.7);
        font-weight: 700;
        line-height: 1.4;
      }

      .btn {
        display: inline-block;
        background-color: var(--accent-primary);
        color: var(--btn-text);
        padding: 12px 25px;
        text-decoration: none;
        font-size: 1.1em;
        border-radius: 50px;
        transition: background-color 0.3s, transform 0.2s, box-shadow 0.3s;
        border: 2px solid var(--accent-primary);
        font-weight: 700;
        cursor: pointer;
        text-align: center;
        -webkit-tap-highlight-color: transparent;
      }
      @media (hover: hover) {
        .btn:hover {
          background-color: var(--accent-primary-hover);
          transform: translateY(-3px);
          box-shadow: 0 4px 12px var(--shadow-color-btn);
        }
        .btn-secondary:hover {
          background-color: var(--accent-primary);
          color: var(--btn-text);
        }
      }
      .btn:active {
        transform: scale(0.95);
      }

      .btn-secondary {
        background-color: var(--surface-color-light);
        color: var(--accent-primary);
        border: 2px solid var(--accent-primary);
      }

      .page-section {
        padding: 70px 0;
        min-height: 80vh;
        background-color: var(--bg-color);
        transition: background-color 0.3s;
      }
      #hero {
        min-height: 100vh;
        border-top: none;
      }
      .page-section.hidden {
        display: none !important;
      }
      section h2.section-title {
        text-align: center;
        font-size: 2.5em;
        margin-bottom: 40px;
        color: var(--accent-primary);
        text-transform: uppercase;
        letter-spacing: 1px;
        font-weight: 700;
        transition: color 0.3s;
      }

      .search-container {
        max-width: 800px;
        margin: 0 auto 40px auto;
        text-align: center;
      }
      #brawler-search {
        width: 100%;
        max-width: 500px;
        padding: 15px 20px;
        font-size: 1.1em;
        background-color: var(--surface-color);
        border: 2px solid var(--border-color);
        border-radius: 30px;
        color: var(--text-primary);
        margin-bottom: 20px;
        transition: border-color 0.3s, box-shadow 0.3s;
      }
      #brawler-search:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px var(--shadow-color);
      }
      #brawler-search::placeholder {
        color: var(--text-tertiary);
      }
      .search-filters {
        display: flex;
        gap: 15px;
        justify-content: center;
        flex-wrap: wrap;
      }
      .search-filters select {
        padding: 10px 15px;
        background-color: var(--surface-color);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        color: var(--text-primary);
        font-size: 0.9em;
        cursor: pointer;
        transition: border-color 0.3s;
      }

      .brawler-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 20px;
        margin-top: 30px;
      }
      .brawler-card {
        background-color: var(--surface-color);
        border-radius: 10px;
        padding: 20px;
        border: 1px solid var(--border-color);
        text-align: center;
        transition: all 0.3s;
        cursor: pointer;
        -webkit-tap-highlight-color: transparent;
      }
      @media (hover: hover) {
        .brawler-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 8px 25px var(--shadow-color);
        }
      }
      .brawler-card:active {
        transform: scale(0.98);
      }

      .brawler-card img {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid var(--accent-primary);
        margin-bottom: 15px;
      }
      .brawler-card h3 {
        font-size: 1.3em;
        color: var(--accent-primary);
        margin-bottom: 8px;
        font-weight: 700;
      }
      .brawler-card .rarity {
        display: inline-block;
        padding: 4px 8px;
        border-radius: 15px;
        font-size: 0.75em;
        font-weight: 700;
        margin-bottom: 8px;
        text-transform: uppercase;
        color: white;
      }
      .brawler-card .rarity.starting {
        background-color: #8b4513;
      }
      .brawler-card .rarity.rare {
        background-color: #4caf50;
      }
      .brawler-card .rarity.super-rare {
        background-color: #2196f3;
      }
      .brawler-card .rarity.hyper-rare {
        background-color: #9c27b0;
      }
      .brawler-card .rarity.ultra-rare {
        background-color: #ff5722;
      }
      .brawler-card .rarity.legend-rare {
        background-color: #ffd700;
        color: black;
      }
      .brawler-card .rarity.ultra-legend-rare {
        background: linear-gradient(45deg, #ff8a00, #e52e71);
      }

      .brawler-card .role {
        color: var(--text-secondary);
        font-size: 0.9em;
        margin-bottom: 10px;
      }
      .brawler-card .quote {
        font-style: italic;
        color: var(--text-secondary);
        font-size: 0.9em;
        margin-bottom: 15px;
        min-height: 40px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .no-results {
        text-align: center;
        padding: 40px;
        color: var(--text-tertiary);
        font-size: 1.1em;
        display: none;
      }

      #brawler-detail-page .container {
        max-width: 1000px;
      }
      .brawler-detail-main-layout {
        display: flex;
        flex-direction: column;
        gap: 30px;
        background-color: var(--surface-color);
        padding: 20px;
        border-radius: 15px;
        border: 1px solid var(--border-color);
      }
      @media (min-width: 768px) {
        .brawler-detail-main-layout {
          flex-direction: row;
          padding: 30px;
        }
      }
      .brawler-detail-left {
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
      }
      .brawler-detail-right {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      @media (min-width: 768px) {
        .brawler-detail-left {
          align-items: flex-start;
          text-align: left;
        }
      }
      .brawler-detail-icon {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 4px solid var(--accent-primary);
        margin-bottom: 20px;
      }
      .brawler-detail-name-jp {
        font-size: 2.8em;
        color: var(--accent-primary);
        font-weight: 700;
        line-height: 1.2;
      }
      .brawler-detail-name-en {
        font-size: 1.5em;
        color: var(--text-secondary);
        margin-bottom: 15px;
      }
      .brawler-detail-tags {
        display: flex;
        gap: 10px;
        margin-bottom: 20px;
        justify-content: center;
      }
      .brawler-detail-tags .rarity,
      .brawler-detail-tags .role {
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 700;
        color: white;
      }
      .brawler-detail-tags .role {
        background-color: var(--surface-color-light);
        color: var(--text-secondary);
      }
      .brawler-detail-primary-quote {
        background-color: var(--surface-color-light);
        border-left: 4px solid var(--accent-primary);
        padding: 15px;
        border-radius: 8px;
        width: 100%;
      }
      .brawler-detail-primary-quote .quote-text {
        font-style: italic;
        font-size: 1.2em;
        color: var(--text-primary);
        font-weight: 700;
      }

      .detail-actions-box {
        background-color: var(--surface-color-light);
        border: 1px solid var(--border-color-light);
        border-radius: 8px;
        padding: 10px;
        display: flex;
        flex-direction: column;
        gap: 10px;
      }
      .detail-actions-box button {
        background: none;
        border: 1px solid var(--accent-primary);
        color: var(--accent-primary);
        padding: 12px;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        font-size: 1em;
        font-weight: 700;
        -webkit-tap-highlight-color: transparent;
      }
      @media (hover: hover) {
        .detail-actions-box button:hover {
          background-color: var(--accent-primary);
          color: var(--btn-text);
        }
      }
      .detail-actions-box button:active {
        transform: scale(0.97);
      }

      .voicelines-section {
        margin-top: 40px;
      }
      .voicelines-section h3 {
        font-size: 1.8em;
        color: var(--accent-primary);
        margin-bottom: 20px;
        border-bottom: 2px solid var(--border-color);
        padding-bottom: 10px;
        font-weight: 700;
      }
      .voiceline-item {
        background-color: var(--surface-color);
        border-radius: 8px;
        margin-bottom: 15px;
        border: 1px solid var(--border-color-light);
        padding: 20px;
        transition: all 0.3s;
      }
      .voiceline-main {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }
      @media (min-width: 768px) {
        .voiceline-main {
          flex-direction: row;
          justify-content: space-between;
          align-items: center;
        }
      }
      .voiceline-quotes {
        flex-grow: 1;
      }
      .voiceline-quotes .quote-en {
        color: var(--accent-primary);
        font-weight: 700;
        font-style: italic;
      }
      .voiceline-quotes .quote-jp {
        color: var(--quote-jp-color);
        font-size: 1em;
        margin-top: 5px;
      }

      .voiceline-toggle,
      .voiceline-play-btn {
        background: none;
        padding: 8px 12px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 0.9em;
        font-weight: 700;
        -webkit-tap-highlight-color: transparent;
      }
      .voiceline-toggle {
        border: 1px solid var(--accent-primary);
        color: var(--accent-primary);
      }
      .voiceline-play-btn {
        border: 2px solid var(--accent-secondary);
        color: var(--accent-secondary);
      }

      @media (hover: hover) {
        .voiceline-toggle:hover {
          background-color: var(--accent-primary);
          color: var(--btn-text);
        }
        .voiceline-play-btn:hover {
          background-color: var(--accent-secondary);
          color: var(--btn-text);
        }
      }
      .voiceline-toggle:active,
      .voiceline-play-btn:active {
        transform: scale(0.92);
      }

      .voiceline-explanation {
        display: none;
        margin-top: 15px;
        padding-top: 15px;
        border-top: 1px solid var(--border-color);
        color: var(--text-secondary);
      }

      #sticky-audio-player {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 100%;
        background: rgba(31, 31, 31, 0.95);
        backdrop-filter: blur(10px);
        border-top: 2px solid var(--accent-primary);
        padding: 12px 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        z-index: 2000;
        transform: translateY(100%);
        transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);
      }
      #sticky-audio-player.visible {
        transform: translateY(0);
      }
      .sticky-info {
        flex: 1;
        overflow: hidden;
      }
      .sticky-info .playing-title {
        font-size: 0.7em;
        color: var(--accent-primary);
        font-weight: bold;
      }
      #sticky-now-playing-text {
        font-size: 0.9em;
        color: #fff;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 250px;
        font-style: italic;
      }
      .sticky-controls {
        display: flex;
        gap: 15px;
        align-items: center;
      }
      .sticky-controls button {
        background: none;
        border: none;
        color: #fff;
        font-size: 1.5em;
        cursor: pointer;
        transition: color 0.2s, transform 0.1s;
        -webkit-tap-highlight-color: transparent;
      }
      @media (hover: hover) {
        .sticky-controls button:hover {
          color: var(--accent-primary);
        }
      }
      #sticky-play-pause {
        font-size: 2.2em;
        color: var(--accent-primary);
      }

      #page-top-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 50px;
        height: 50px;
        background-color: var(--accent-primary);
        color: var(--btn-text);
        border-radius: 50%;
        text-align: center;
        line-height: 50px;
        font-size: 24px;
        cursor: pointer;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s;
        z-index: 1001;
      }
      #page-top-btn.visible {
        opacity: 1;
        visibility: visible;
      }

      #request-btn {
        position: fixed;
        bottom: 30px;
        left: 30px;
        background-color: var(--accent-primary);
        color: var(--btn-text);
        padding: 12px 20px;
        border-radius: 50px;
        font-weight: 700;
        text-decoration: none;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
        z-index: 2001;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 8px;
        border: 2px solid var(--accent-primary);
        -webkit-tap-highlight-color: transparent;
      }
      @media (hover: hover) {
        #request-btn:hover {
          background-color: var(--accent-primary-hover);
          transform: translateY(-3px);
          box-shadow: 0 6px 20px rgba(0, 0, 0, 0.5);
        }
      }
      #request-btn:active {
        transform: scale(0.95);
      }

      /* å†ç”Ÿãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹æ™‚ã€å„ãƒœã‚¿ãƒ³ã‚’ä¸Šã«ç§»å‹•ã•ã›ã‚‹ */
      #sticky-audio-player.visible ~ #page-top-btn,
      #sticky-audio-player.visible ~ #request-btn,
      #sticky-audio-player.visible ~ #theme-toggle-btn {
        bottom: 120px !important;
      }

      .tiktok-video-container {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
      }
      footer {
        background-color: var(--surface-color);
        padding: 30px 0;
        border-top: 1px solid var(--border-color);
        text-align: center;
      }
      .voiceline-item.playing {
        border: 2px solid var(--accent-primary) !important;
        background-color: var(--surface-color-light);
        transform: scale(1.02);
      }

      #theme-toggle-btn {
        position: fixed;
        bottom: 90px;
        right: 30px;
        width: 50px;
        height: 50px;
        background-color: var(--surface-color);
        color: var(--text-primary);
        border: 2px solid var(--border-color);
        border-radius: 50%;
        font-size: 24px;
        cursor: pointer;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 2005;
      }

      /* ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆï¼ˆä¿®æ­£ç‰ˆï¼‰ */
      .header-seo-text {
        font-size: 0.45em; /* æ–‡å­—ã‚’å°‘ã—ã ã‘å¤§ããï¼ˆ0.4â†’0.45ï¼‰ */
        color: var(--accent-primary); /* â˜…ã“ã“ã‚’ã€Œæ°´è‰²ã€ã«å¤‰æ›´ï¼ */
        margin-left: 10px;
        text-transform: none;
        vertical-align: middle;
        font-weight: 700; /* â˜…ã“ã“ã‚’ã€Œå¤ªå­—ã€ã«å¤‰æ›´ï¼ */
        letter-spacing: 0.05em; /* å°‘ã—é–“éš”ã‚’ç©ºã‘ã¦èª­ã¿ã‚„ã™ã */
      }

      /* â–²â–²â–² ã“ã“ã¾ã§ã‚³ãƒ”ãƒ¼ â–²â–²â–² */
      @media (max-width: 768px) {
        .header-seo-text {
          display: block;
          margin-left: 0;
          margin-top: 5px;
          font-size: 0.5em;
        }
      }

      /* â–  è¦ªè¦ç´ ã®è¨­å®š */
      .brawler-card,
      .voiceline-item {
        position: relative !important;
      }

      /* â–  ãŠæ°—ã«å…¥ã‚Šãƒœã‚¿ãƒ³ï¼ˆæœ€å¼·å›ºå®šç‰ˆï¼‰ */
      .fav-btn {
        position: absolute !important;
        top: 10px !important;
        right: 10px !important;
        width: 50px !important;
        height: 50px !important;
        min-width: 50px !important;
        min-height: 50px !important;
        flex-shrink: 0 !important;
        font-size: 24px !important;
        border-radius: 50%;
        background-color: rgba(0, 0, 0, 0.6) !important;
        border: 2px solid rgba(255, 255, 255, 0.3) !important;
        color: #ccc !important;
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 100;
        cursor: pointer;
        padding: 0;
        -webkit-tap-highlight-color: transparent;
        transition: transform 0.1s, color 0.2s;
      }
      .fav-btn.active {
        color: #ff4d4d !important;
        border-color: #ff4d4d !important;
      }
      .fav-btn:active {
        transform: scale(0.9);
      }

      /* â–  ã‚»ãƒªãƒ•ã®æ–‡å­—ãŒãƒœã‚¿ãƒ³ã®ä¸‹ã«éš ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹éš™é–“ */
      .voiceline-main {
        padding-right: 60px !important;
      }

      /* â–  ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒœã‚¿ãƒ³åŒ– */
      .nav-link {
        cursor: pointer;
        user-select: none;
      }
      .nav-link.active {
        color: var(--accent-primary) !important;
        border-bottom: 2px solid var(--accent-primary);
      }

      /* â–¼â–¼â–¼ [ç©¶æ¥µç‰ˆ] ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼ç”¨CSSï¼ˆã“ã“ã‹ã‚‰æ›¸ãæ›ãˆï¼‰ â–¼â–¼â–¼ */

      /* 1. ãƒ˜ãƒƒãƒ€ãƒ¼ã®æ çµ„ã¿ï¼ˆã‚³ãƒ³ãƒ†ãƒŠï¼‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
      .header-nav-container {
        transition: padding 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        will-change: padding;
      }

      /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ï¼šä¸Šä¸‹ã®ä½™ç™½ã‚’ã€Œ20pxã€ã‹ã‚‰ã€Œ5pxã€ã¾ã§é™ç•Œã«ç¸®ã‚ã‚‹ */
      header.scrolled .header-nav-container {
        padding-top: 8px !important;
        padding-bottom: 8px !important;
      }

      /* 2. ãƒ˜ãƒƒãƒ€ãƒ¼èƒŒæ™¯ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
      header {
        transition: background-color 0.3s ease, box-shadow 0.3s ease;
      }

      /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ï¼šèƒŒæ™¯ã‚’åŠé€æ˜ã«ã—ã¦å½±ã‚’ã¤ã‘ã‚‹ */
      header.scrolled {
        background-color: rgba(
          31,
          31,
          31,
          0.95
        ); /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ç”¨ï¼ˆãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ã¯JSã§åˆ¶å¾¡ã—ãªã„ã®ã§CSSå¤‰æ•°ãŒç†æƒ³ã§ã™ãŒä¸€æ—¦ã“ã‚Œã§ï¼‰ */
        backdrop-filter: blur(10px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.4);
      }
      /* ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰æ™‚ã®ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«èƒŒæ™¯ï¼ˆä¸Šæ›¸ãï¼‰ */
      body.light-theme header.scrolled {
        background-color: rgba(255, 255, 255, 0.95);
      }

      /* 3. ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆLEXIEï¼‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
      header h1 {
        transition: font-size 0.3s ease, margin 0.3s ease;
        line-height: 1; /* è¡Œé–“ã‚’è©°ã‚ã‚‹ */
      }

      /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ï¼šæ–‡å­—ã‚µã‚¤ã‚ºã‚’ã€Œ2.2emã€ã‹ã‚‰ã€Œ1.5emã€ã«ã‚®ãƒ¥ãƒƒã¨å°ã•ãã™ã‚‹ */
      header.scrolled h1 {
        font-size: 1.5em !important;
        margin-bottom: 0 !important;
      }

      /* â–¼â–¼â–¼ [ã‚¹ãƒãƒ›å®Œå…¨å¯¾å¿œç‰ˆ] ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆãƒ˜ãƒƒãƒ€ãƒ¼CSSï¼ˆã“ã“ã‹ã‚‰ä¸Šæ›¸ãï¼‰ â–¼â–¼â–¼ */

      /* 3. ã‚¿ã‚¤ãƒˆãƒ«ï¼ˆLEXIEï¼‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
      header h1 {
        transition: font-size 0.3s ease, margin 0.3s ease;
        line-height: 1.2; /* è¡Œé–“ã‚’ç¢ºä¿ã—ã¦è¢«ã‚Šã‚’é˜²ã */

        /* ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´ç”¨ */
        display: flex;
        align-items: baseline; /* PCã§ã¯æ–‡å­—ã®åº•è¾ºã‚’æƒãˆã‚‹ */
        flex-wrap: wrap; /* ç”»é¢å¹…ãŒç‹­ã„æ™‚ã«æŠ˜ã‚Šè¿”ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ */
      }

      /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ï¼šæ–‡å­—ã‚µã‚¤ã‚ºã‚’ã€Œ2.2emã€ã‹ã‚‰ã€Œ1.5emã€ã«ã‚®ãƒ¥ãƒƒã¨å°ã•ãã™ã‚‹ */
      header.scrolled h1 {
        font-size: 1.5em !important;
        margin-bottom: 0 !important;
      }

      /* 4. ã‚µãƒ–ãƒ†ã‚­ã‚¹ãƒˆï¼ˆãƒœã‚¤ã‚¹å†ç”Ÿ...ï¼‰ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
      .header-seo-text {
        font-size: 0.65em;
        color: var(--accent-primary);
        margin-left: 15px; /* PCã§ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ã®éš™é–“ */
        text-transform: none;
        font-weight: 700;
        letter-spacing: 0.05em;

        /* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¨­å®š */
        /* â˜…ä¿®æ­£ç‚¹ï¼šé«˜ã•åˆ¶é™ã‚’20pxã‹ã‚‰80pxã«æ‹¡å¤§ï¼ˆã‚¹ãƒãƒ›ã®æ”¹è¡Œã«å¯¾å¿œï¼‰ */
        max-height: 80px;
        opacity: 1;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        overflow: hidden;
        display: block; /* ç¢ºå®Ÿã«è¡¨ç¤ºã‚¨ãƒªã‚¢ã‚’ç¢ºä¿ */
      }

      /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ï¼šå®Œå…¨ã«æ¶ˆã—å»ã‚‹ï¼ˆé«˜ã•0ã€é€æ˜ã€éš™é–“ãªã—ï¼‰ */
      header.scrolled .header-seo-text {
        opacity: 0;
        max-height: 0; /* ã“ã“ã§0ã«ã™ã‚‹ã“ã¨ã§ã‚·ãƒ¥ãƒƒã¨æ¶ˆãˆã‚‹ */
        margin-left: 0 !important;
        margin-top: 0 !important;
        pointer-events: none;
      }

      /* ã‚¹ãƒãƒ›å¯¾å¿œï¼šç¸¦ä¸¦ã³ã«ã—ã¦ãƒãƒ©ãƒ³ã‚¹ã‚’å–ã‚‹ */
      @media (max-width: 768px) {
        header h1 {
          flex-direction: column; /* ç¸¦ç©ã¿ã«å¤‰æ›´ */
          align-items: flex-start; /* å·¦å¯„ã› */
        }

        .header-seo-text {
          margin-left: 0; /* å·¦ã®éš™é–“ã‚’æ¶ˆã™ */
          margin-top: 5px; /* LEXIEã¨ã®é–“ã«éš™é–“ã‚’ä½œã‚‹ */
          font-size: 0.35em; /* ã‚¹ãƒãƒ›ã§ã¯æ–‡å­—ã‚’å°‘ã—å°ã•ãã—ã¦1è¡Œã«åã¾ã‚Šã‚„ã™ãã™ã‚‹ */
          line-height: 1.4; /* è¡Œé–“ã‚’åºƒã’ã¦èª­ã¿ã‚„ã™ã */
        }
      }

      /* â–²â–²â–² ã“ã“ã¾ã§ â–²â–²â–² */
    </style>
  </head>

  <body>
    <header>
      <div id="beta-banner">ğŸš§ ç¾åœ¨ãƒ™ãƒ¼ã‚¿ç‰ˆã§ã™ã€‚ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‹Ÿé›†ä¸­ï¼ ğŸš§</div>
      <div class="header-nav-container">
        <h1>
          Lexie
          <span class="header-seo-text"
            >ã€ãƒœã‚¤ã‚¹å†ç”Ÿã€‘ãƒ–ãƒ­ã‚¹ã‚¿ã‚»ãƒªãƒ•é›†ï½œå…¨91ã‚­ãƒ£ãƒ©å¯¾å¿œï¼ˆé †æ¬¡æ›´æ–°ä¸­ï¼‰</span
          >
        </h1>
        <nav>
          <ul>
            <li><a class="nav-link active" data-target="home">ãƒ›ãƒ¼ãƒ </a></li>
            <li>
              <a class="nav-link" data-target="favorites" style="color: #ff4d4d"
                >â¤ï¸ ãŠæ°—ã«å…¥ã‚Š</a
              >
            </li>
            <li><a class="nav-link" data-target="lessons">ç¿»è¨³å‹•ç”»</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main>
      <section id="hero" class="page-section">
        <div class="container">
          <h2
            style="
              font-size: 2.2em;
              line-height: 1.3;
              margin-bottom: 20px;
              text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
            "
          >
            ã‚ã®ã‚­ãƒ£ãƒ©ã¯ä½•ã‚’å–‹ã£ã¦ã‚‹ã®ï¼Ÿï¼<br />
            <span style="font-size: 0.7em; color: var(--accent-primary)"
              >ğŸ”Š éŸ³å£°å†ç”Ÿï¼†å’Œè¨³ã§ãƒ–ãƒ­ã‚¹ã‚¿è‹±èªã‚’æ”»ç•¥</span
            >
          </h2>
          <div class="search-container">
            <input
              type="text"
              id="brawler-search"
              placeholder="ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼åã‚’å…¥åŠ›ï¼ˆä¾‹ï¼šã‚·ã‚§ãƒªãƒ¼ã€ã‚³ãƒ«ãƒˆï¼‰"
              style="
                max-width: 600px;
                width: 100%;
                height: 60px;
                font-size: 1.3em;
              "
            />
            <div class="search-filters">
              <select id="rarity-filter">
                <option value="">å…¨ã¦ã®ãƒ¬ã‚¢åº¦</option>
                <option value="starting">åˆæœŸ</option>
                <option value="rare">ãƒ¬ã‚¢</option>
                <option value="super-rare">ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¬ã‚¢</option>
                <option value="hyper-rare">ãƒã‚¤ãƒ‘ãƒ¼ãƒ¬ã‚¢</option>
                <option value="ultra-rare">ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢</option>
                <option value="legend-rare">ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ãƒ¬ã‚¢</option>
                <option value="ultra-legend-rare">
                  ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ãƒ¬ã‚¢
                </option>
              </select>
              <select id="role-filter">
                <option value="">å…¨ã¦ã®å½¹å‰²</option>
                <option value="damage-dealer">ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼</option>
                <option value="tank">ã‚¿ãƒ³ã‚¯</option>
                <option value="support">ã‚µãƒãƒ¼ãƒˆ</option>
                <option value="assassin">ã‚¢ã‚µã‚·ãƒ³</option>
                <option value="thrower">ã‚¹ãƒ­ãƒ¯ãƒ¼</option>
                <option value="marksman">ãƒãƒ¼ã‚¯ã‚¹ãƒãƒ³</option>
                <option value="unknown">ä¸æ˜</option>
              </select>
            </div>
          </div>
        </div>
      </section>

      <section
        id="brawler-spotlight"
        class="page-section container"
        style="min-height: auto; padding-top: 0"
      >
        <div id="brawler-grid" class="brawler-grid"></div>
        <div id="no-results" class="no-results">
          <p>è©²å½“ã™ã‚‹ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
        </div>
      </section>

      <section id="favorites" class="page-section hidden">
        <div class="container">
          <h2 class="section-title">â¤ï¸ ãŠæ°—ã«å…¥ã‚Šä¸€è¦§</h2>

          <div
            class="favorites-controls"
            style="
              text-align: center;
              margin-bottom: 30px;
              background: var(--surface-color);
              padding: 20px;
              border-radius: 15px;
              border: 1px solid var(--border-color);
            "
          >
            <input
              type="text"
              id="fav-search"
              placeholder="ãŠæ°—ã«å…¥ã‚Šå†…ã‚’æ¤œç´¢..."
              style="
                width: 100%;
                max-width: 400px;
                padding: 10px;
                border-radius: 20px;
                border: 1px solid var(--border-color);
                background: var(--bg-color);
                color: var(--text-primary);
                margin-bottom: 15px;
              "
            />
            <div
              style="
                display: flex;
                align-items: center;
                justify-content: center;
                gap: 10px;
              "
            >
              <label
                for="show-voicelines-only"
                style="
                  cursor: pointer;
                  font-weight: bold;
                  display: flex;
                  align-items: center;
                  gap: 8px;
                "
              >
                <input
                  type="checkbox"
                  id="show-voicelines-only"
                  style="transform: scale(1.5)"
                />
                ğŸ’¬ ã‚»ãƒªãƒ•ã®ã¿è¡¨ç¤ºã™ã‚‹
              </label>
            </div>
          </div>

          <div id="fav-brawlers-section">
            <h3
              style="
                color: var(--accent-primary);
                border-bottom: 2px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
              "
            >
              ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
            </h3>
            <div id="fav-brawlers-grid" class="brawler-grid"></div>
            <p
              id="no-fav-brawlers-msg"
              style="
                text-align: center;
                color: var(--text-tertiary);
                display: none;
              "
            >
              ç™»éŒ²ã•ã‚ŒãŸã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¯ã„ã¾ã›ã‚“ã€‚
            </p>
          </div>

          <div id="fav-voicelines-section" style="margin-top: 40px">
            <h3
              style="
                color: var(--accent-secondary);
                border-bottom: 2px solid var(--border-color);
                padding-bottom: 10px;
                margin-bottom: 20px;
              "
            >
              ã‚»ãƒªãƒ•
            </h3>
            <div id="fav-voicelines-list"></div>
            <p
              id="no-fav-voicelines-msg"
              style="
                text-align: center;
                color: var(--text-tertiary);
                display: none;
              "
            >
              ç™»éŒ²ã•ã‚ŒãŸã‚»ãƒªãƒ•ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚
            </p>
          </div>

          <div
            id="empty-favorites-state"
            style="text-align: center; padding: 50px; display: none"
          >
            <p style="font-size: 1.5em; color: var(--text-tertiary)">
              ã¾ã ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ ğŸ˜¿
            </p>
            <button
              onclick="switchPage('home')"
              class="btn"
              style="margin-top: 20px"
            >
              ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚’æ¢ã—ã«è¡Œã
            </button>
          </div>
        </div>
      </section>

      <section id="lessons" class="page-section container hidden">
        <h2 class="section-title">ç¿»è¨³å‹•ç”»</h2>
        <div class="tiktok-video-container">
          <div class="tiktok-video-item" id="tiktok-video-1"></div>
        </div>
      </section>

      <section id="about" class="page-section container">
        <h2 class="section-title">Lexieã«ã¤ã„ã¦</h2>
        <p style="text-align: center; max-width: 700px; margin: 0 auto">
          Lexieã¯ãƒ–ãƒ­ã‚¹ã‚¿ãƒ•ã‚¡ãƒ³ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚å­¦ç¿’ãŒã‚²ãƒ¼ãƒ ä½“é¨“ã®ä¸€éƒ¨ã¨ãªã‚‹ã“ã¨ã‚’é¡˜ã£ã¦ã„ã¾ã™ã€‚
        </p>
      </section>

      <section id="brawler-detail-page" class="page-section hidden">
        <div class="container">
          <div id="brawler-detail-content"></div>
          <div class="brawler-detail-actions">
            <button
              id="back-to-list-btn"
              class="btn btn-secondary back-to-list-button"
            >
              ä¸€è¦§ã¸æˆ»ã‚‹
            </button>
          </div>
        </div>
      </section>
    </main>

    <footer class="fan-policy-footer">
      <p>
        ã“ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯éå…¬å¼ã§ã‚ã‚Šã€Supercellã«ã‚ˆã‚‹æ‰¿èªã‚’å—ã‘ã¦ã„ã¾ã›ã‚“ã€‚ãƒ•ã‚¡ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã«é–¢ã™ã‚‹è©³ç´°ã¯ã€Supercellã®ãƒ•ã‚¡ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒªã‚·ãƒ¼ã‚’ã”è¦§ãã ã•ã„ï¼ˆ<a
          href="https://www.supercell.com/fan-content-policy"
          target="_blank"
          rel="noopener"
          >www.supercell.com/fan-content-policy</a
        >ï¼‰ã€‚
      </p>
      <hr
        style="
          border: 0;
          border-top: 1px solid #333;
          margin: 20px auto;
          width: 50%;
        "
      />
      <div class="credits">
        <p style="font-size: 10px; color: var(--text-tertiary)">
          <strong>ã€å‡ºå…¸ãƒ»å¼•ç”¨å…ƒã€‘</strong><br />
          ã‚»ãƒªãƒ•ãƒ»ãƒ‡ãƒ¼ã‚¿å¼•ç”¨ï¼š<a
            href="https://brawlstars.fandom.com/wiki/Brawl_Stars_Wiki"
            target="_blank"
            rel="noopener"
            >Brawl Stars Wiki (Fandom)</a
          ><br />
          ç”»åƒãƒ»æ”»ç•¥æƒ…å ±å‚è€ƒï¼šGamewith<br />
          ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è‘—ä½œæ¨©ï¼šÂ© Supercell
        </p>
      </div>
    </footer>

    <a
      href="https://docs.google.com/forms/d/e/1FAIpQLSd4jicnyFLtY7ydADYmBi7TpVp64VKlC24Ty1voCgiwHGJihg/viewform?usp=dialog"
      target="_blank"
      id="request-btn"
      rel="noopener noreferrer"
      >ğŸ“¢ ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</a
    >

    <div id="sticky-audio-player">
      <div class="sticky-info">
        <div class="playing-title">Now Playing</div>
        <div id="sticky-now-playing-text">ã‚»ãƒªãƒ•ã‚’å†ç”Ÿä¸­...</div>
      </div>
      <div class="sticky-controls">
        <button id="sticky-prev">â®</button>
        <button id="sticky-play-pause">â–¶</button>
        <button id="sticky-next">â­</button>
        <button id="sticky-shuffle">ğŸ”€</button>
      </div>
    </div>

    <script src="brawlers.js"></script>
    <script async src="https://www.tiktok.com/embed.js"></script>

    <script>
      // â–  å¤‰æ•°å®šç¾©
      let filteredBrawlers = [];
      let lastScrollPosition = 0;
      let currentAudio = null;
      let playlist = [];
      let currentIndex = 0;
      let isShuffle = false;
      let isSequentialPlaying = false;

      // â–  è¦ç´ ã®å–å¾—
      const searchInput = document.getElementById("brawler-search");
      const rarityFilter = document.getElementById("rarity-filter");
      const roleFilter = document.getElementById("role-filter");
      const brawlerGrid = document.getElementById("brawler-grid");
      const noResults = document.getElementById("no-results");
      const brawlerDetailPage = document.getElementById("brawler-detail-page");
      const brawlerDetailContent = document.getElementById(
        "brawler-detail-content"
      );

      // â–  ãŠæ°—ã«å…¥ã‚Šç”¨ã®è¦ç´ 
      const favSearchInput = document.getElementById("fav-search");
      const showVoicelinesOnlyCheckbox = document.getElementById(
        "show-voicelines-only"
      );

      // ----------------------------------------------------
      // 1. ãƒšãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆã‚·ã‚¹ãƒ†ãƒ ï¼ˆç´™èŠå±…ã®ã‚ãã‚Šå½¹ï¼‰
      // ----------------------------------------------------

      // â–¼â–¼â–¼ ä¿®æ­£ç‰ˆ switchPageï¼ˆã“ã“ã‹ã‚‰ï¼‰ â–¼â–¼â–¼
      function switchPage(pageName) {
        // â˜…è¿½åŠ ï¼šãƒšãƒ¼ã‚¸ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ç¬é–“ã€å¼·åˆ¶çš„ã«ä¸€ç•ªä¸Šã«æˆ»ã™ï¼
        window.scrollTo(0, 0);

        // ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¸€æ—¦éš ã™
        const sections = [
          "hero",
          "brawler-spotlight",
          "lessons",
          "about",
          "favorites",
        ];
        sections.forEach((id) => {
          const el = document.getElementById(id);
          if (el) el.classList.add("hidden");
        });

        // è©³ç´°ãƒšãƒ¼ã‚¸ã‚‚éš ã™
        brawlerDetailPage.classList.add("hidden");

        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ–è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
        document
          .querySelectorAll(".nav-link")
          .forEach((link) => link.classList.remove("active"));

        // æŒ‡å®šã•ã‚ŒãŸãƒšãƒ¼ã‚¸ã ã‘ã‚’è¡¨ç¤ºã™ã‚‹
        if (pageName === "home") {
          document.getElementById("hero").classList.remove("hidden");
          document
            .getElementById("brawler-spotlight")
            .classList.remove("hidden");
          document.getElementById("about").classList.remove("hidden");
          document
            .querySelector('[data-target="home"]')
            .classList.add("active");
        } else if (pageName === "lessons") {
          document.getElementById("lessons").classList.remove("hidden");
          document
            .querySelector('[data-target="lessons"]')
            .classList.add("active");
        } else if (pageName === "favorites") {
          document.getElementById("favorites").classList.remove("hidden");
          document
            .querySelector('[data-target="favorites"]')
            .classList.add("active");
          renderFavoritesPage(); // ãŠæ°—ã«å…¥ã‚Šãƒšãƒ¼ã‚¸ã‚’å†æç”»
        }
      }
      // â–²â–²â–² ä¿®æ­£ç‰ˆ switchPageï¼ˆã“ã“ã¾ã§ï¼‰ â–²â–²â–²

      // ----------------------------------------------------
      // 2. ãŠæ°—ã«å…¥ã‚Šæ©Ÿèƒ½ï¼ˆä¿å­˜ãƒ»èª­ã¿è¾¼ã¿ï¼‰
      // ----------------------------------------------------
      function getFavorites() {
        const favs = localStorage.getItem("lexie_favorites");
        return favs ? JSON.parse(favs) : [];
      }
      function toggleFavorite(brawlerName) {
        let favs = getFavorites();
        if (favs.includes(brawlerName)) {
          favs = favs.filter((name) => name !== brawlerName);
        } else {
          favs.push(brawlerName);
        }
        localStorage.setItem("lexie_favorites", JSON.stringify(favs));
        return favs.includes(brawlerName);
      }
      function getVoicelineFavorites() {
        const favs = localStorage.getItem("lexie_fav_voicelines");
        return favs ? JSON.parse(favs) : [];
      }
      function toggleVoicelineFavorite(id) {
        let favs = getVoicelineFavorites();
        if (favs.includes(id)) {
          favs = favs.filter((favId) => favId !== id);
        } else {
          favs.push(id);
        }
        localStorage.setItem("lexie_fav_voicelines", JSON.stringify(favs));
        return favs.includes(id);
      }

      // ----------------------------------------------------
      // 3. ãŠæ°—ã«å…¥ã‚Šãƒšãƒ¼ã‚¸ã®è¡¨ç¤ºï¼ˆãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ï¼‰
      // ----------------------------------------------------
      // â–¼â–¼â–¼ 2. ä¿®æ­£ç‰ˆ renderFavoritesPageï¼ˆã“ã“ã‹ã‚‰ã‚³ãƒ”ãƒ¼ï¼‰ â–¼â–¼â–¼
      function renderFavoritesPage() {
        const favBrawlersList = getFavorites();
        const favVoicelinesList = getVoicelineFavorites();
        const searchText = favSearchInput.value.toLowerCase();
        const onlyVoicelines = showVoicelinesOnlyCheckbox.checked;

        const brawlersContainer = document.getElementById(
          "fav-brawlers-section"
        );
        const voicelinesContainer = document.getElementById(
          "fav-voicelines-section"
        );
        const emptyState = document.getElementById("empty-favorites-state");

        // ä½•ã‚‚ç™»éŒ²ãŒãªã„å ´åˆ
        if (favBrawlersList.length === 0 && favVoicelinesList.length === 0) {
          brawlersContainer.style.display = "none";
          voicelinesContainer.style.display = "none";
          emptyState.style.display = "block";
          return;
        } else {
          emptyState.style.display = "none";
        }

        // â– â–  ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è¦§ã®è¡¨ç¤ºåˆ¶å¾¡ â– â– 
        if (onlyVoicelines) {
          brawlersContainer.style.display = "none";
        } else {
          brawlersContainer.style.display = "block";
          const grid = document.getElementById("fav-brawlers-grid");
          grid.innerHTML = "";
          let hasHit = false;

          // brawlerså¤‰æ•°ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
          if (typeof brawlers !== "undefined") {
            brawlers.forEach((b) => {
              if (favBrawlersList.includes(b.name)) {
                if (searchText && !b.name.toLowerCase().includes(searchText))
                  return;
                grid.appendChild(createBrawlerCard(b));
                hasHit = true;
              }
            });
          }
          document.getElementById("no-fav-brawlers-msg").style.display = hasHit
            ? "none"
            : "block";
          if (favBrawlersList.length === 0)
            document.getElementById("no-fav-brawlers-msg").style.display =
              "none";
        }

        // â– â–  ã‚»ãƒªãƒ•ä¸€è¦§ã®è¡¨ç¤ºåˆ¶å¾¡ï¼ˆãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼æ©Ÿèƒ½ä»˜ãï¼‰ â– â– 
        voicelinesContainer.style.display = "block";

        // HTMLã‚’ã‚»ãƒƒãƒˆï¼ˆãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¿½åŠ ï¼‰
        voicelinesContainer.innerHTML = `
    <h3 style="color: var(--accent-secondary); border-bottom: 2px solid var(--border-color); padding-bottom: 10px; margin-bottom: 20px;">ã‚»ãƒªãƒ•</h3>
    
    <div class="detail-actions-box" id="fav-player-controls" style="margin-bottom: 20px; display: none;">
        <button id="fav-play-all-btn">â–¶ å…¨éŸ³å£°å†ç”Ÿ</button>
        <button id="fav-shuffle-btn">ğŸ”€ OFF</button>
    </div>

    <div id="fav-voicelines-list"></div>
    <p id="no-fav-voicelines-msg" style="text-align: center; color: var(--text-tertiary); display: none;">ç™»éŒ²ã•ã‚ŒãŸã‚»ãƒªãƒ•ã¯ã„ã¾ã›ã‚“ã€‚</p>
  `;

        const vList = document.getElementById("fav-voicelines-list");
        const playerControls = document.getElementById("fav-player-controls");

        // å†ç”Ÿãƒªã‚¹ãƒˆï¼ˆãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆï¼‰ã‚’ä½œæˆ
        let tempPlaylist = [];
        if (typeof brawlers !== "undefined") {
          brawlers.forEach((b) => {
            if (!b.voicelines) return;
            b.voicelines.forEach((l) => {
              if (favVoicelinesList.includes(l.id)) {
                if (
                  searchText &&
                  !l.quote.toLowerCase().includes(searchText) &&
                  !l.translation.includes(searchText)
                )
                  return;

                tempPlaylist.push({
                  audioUrl: l.audioUrl,
                  quote: l.quote,
                  id: l.id,
                  translation: l.translation,
                  brawlerName: b.name,
                });
              }
            });
          });
        }

        // ã‚»ãƒªãƒ•ãŒ1ã¤ä»¥ä¸Šã‚ã‚Œã°ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤ºã—ã¦å‹•ãã‚ˆã†ã«ã™ã‚‹
        if (tempPlaylist.length > 0) {
          playerControls.style.display = "flex";
          playerControls.style.gap = "10px";

          // å…¨å†ç”Ÿãƒœã‚¿ãƒ³
          document.getElementById("fav-play-all-btn").onclick = () => {
            if (isSequentialPlaying) {
              stopAllPlayback();
            } else {
              // ã‚°ãƒ­ãƒ¼ãƒãƒ«ã®ãƒ—ãƒ¬ã‚¤ãƒªã‚¹ãƒˆã‚’æ›¸ãæ›ãˆ
              playlist = isShuffle
                ? shuffleArray(tempPlaylist)
                : [...tempPlaylist];
              playTrackByIndex(0);
            }
          };

          // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒœã‚¿ãƒ³
          const shufBtn = document.getElementById("fav-shuffle-btn");
          shufBtn.innerText = isShuffle ? "ğŸ”€ ON" : "ğŸ”€ OFF";
          shufBtn.style.color = isShuffle
            ? "var(--accent-secondary)"
            : "var(--accent-primary)";

          shufBtn.onclick = () => {
            isShuffle = !isShuffle;
            shufBtn.innerText = isShuffle ? "ğŸ”€ ON" : "ğŸ”€ OFF";
            shufBtn.style.color = isShuffle
              ? "var(--accent-secondary)"
              : "var(--accent-primary)";
            // å†ç”Ÿä¸­ãªã‚‰æ··ãœç›´ã™
            if (isSequentialPlaying) {
              playlist = isShuffle
                ? shuffleArray(tempPlaylist)
                : [...tempPlaylist];
            }
          };
        } else {
          document.getElementById("no-fav-voicelines-msg").style.display =
            "block";
        }

        // å€‹åˆ¥ã®ã‚»ãƒªãƒ•ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ä¸¦ã¹ã‚‹
        tempPlaylist.forEach((track, index) => {
          const item = document.createElement("div");
          item.className = "voiceline-item";
          item.style.position = "relative";
          item.id = `vl-item-${track.id}`;

          item.innerHTML = `
        <div style="font-size:0.8em; color:var(--text-tertiary); margin-bottom:5px;">${track.brawlerName}</div>
        <button class="fav-btn active" style="position:absolute!important; top:10px!important; right:10px!important; width:40px!important; height:40px!important; min-width:40px!important; min-height:40px!important; flex-shrink:0!important; border-radius:50%; background:rgba(0,0,0,0.6)!important; border:2px solid #ff4d4d!important; color:#ff4d4d!important; font-size:20px!important; display:flex; justify-content:center; align-items:center; z-index:100; cursor:pointer; padding:0;">â™¥</button>
        <div class="voiceline-main" style="padding-right: 50px!important;">
          <div class="voiceline-quotes">
            <p class="quote-en" style="font-weight:bold; color:var(--accent-primary);">"${track.quote}"</p>
            <p class="quote-jp">${track.translation}</p>
          </div>
          <button class="voiceline-play-btn" style="margin-top:10px; border:2px solid var(--accent-secondary); color:var(--accent-secondary); background:none; padding:5px 15px; border-radius:20px; font-weight:bold; cursor:pointer;">å†ç”Ÿ â–¶</button>
        </div>
      `;

          // å€‹åˆ¥å†ç”Ÿãƒœã‚¿ãƒ³ï¼šã“ã“ã‚’æŠ¼ã—ã¦ã‚‚ã€Œé€£ç¶šå†ç”Ÿãƒ¢ãƒ¼ãƒ‰ã€ã«å…¥ã‚‹
          item.querySelector(".voiceline-play-btn").onclick = () => {
            playlist = [...tempPlaylist];
            isShuffle = false;
            // ã‚·ãƒ£ãƒƒãƒ•ãƒ«ãƒœã‚¿ãƒ³ã®è¦‹ãŸç›®ã‚’ãƒªã‚»ãƒƒãƒˆ
            const shufBtn = document.getElementById("fav-shuffle-btn");
            if (shufBtn) {
              shufBtn.innerText = "ğŸ”€ OFF";
              shufBtn.style.color = "var(--accent-primary)";
            }
            playTrackByIndex(index);
          };

          // ãƒãƒ¼ãƒˆè§£é™¤ãƒœã‚¿ãƒ³
          item.querySelector(".fav-btn").onclick = (e) => {
            e.stopPropagation();
            toggleVoicelineFavorite(track.id);
            renderFavoritesPage(); // ç”»é¢ã‚’æ›´æ–°ã—ã¦æ¶ˆã™
          };

          vList.appendChild(item);
        });
      }
      // â–²â–²â–² 2. ä¿®æ­£ç‰ˆ renderFavoritesPageï¼ˆã“ã“ã¾ã§ã‚³ãƒ”ãƒ¼ï¼‰ â–²â–²â–²

      // ----------------------------------------------------
      // 4. åŸºæœ¬æ©Ÿèƒ½ï¼ˆã‚«ãƒ¼ãƒ‰ä½œæˆã€è©³ç´°è¡¨ç¤ºãªã©ï¼‰
      // ----------------------------------------------------
      function getRarityText(k) {
        const m = {
          starting: "åˆæœŸ",
          rare: "ãƒ¬ã‚¢",
          "super-rare": "ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ¬ã‚¢",
          "hyper-rare": "ãƒã‚¤ãƒ‘ãƒ¼ãƒ¬ã‚¢",
          "ultra-rare": "ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¢",
          "legend-rare": "ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ãƒ¬ã‚¢",
          "ultra-legend-rare": "ã‚¦ãƒ«ãƒˆãƒ©ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ãƒ¬ã‚¢",
        };
        return m[k.toLowerCase().replace(/\s+/g, "-")] || k;
      }
      function getRoleText(k) {
        const m = {
          "damage-dealer": "ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ‡ã‚£ãƒ¼ãƒ©ãƒ¼",
          tank: "ã‚¿ãƒ³ã‚¯",
          support: "ã‚µãƒãƒ¼ãƒˆ",
          assassin: "ã‚¢ã‚µã‚·ãƒ³",
          thrower: "ã‚¹ãƒ­ãƒ¯ãƒ¼",
          marksman: "ãƒãƒ¼ã‚¯ã‚¹ãƒãƒ³",
          unknown: "ä¸æ˜",
        };
        return m[k.toLowerCase().replace(/\s+/g, "-")] || k;
      }

      function createBrawlerCard(b) {
        const card = document.createElement("div");
        card.className = "brawler-card";
        const favs = getFavorites();
        const isFav = favs.includes(b.name);
        const img = b.iconUrl || `https://placehold.co/80x80?text=${b.name}`;

        card.innerHTML = `
          <button class="fav-btn ${isFav ? "active" : ""}">â™¥</button>
          <img src="${img}">
          <h3>${b.name}</h3>
          <div class="rarity ${b.rarity
            .toLowerCase()
            .replace(/\s+/g, "-")}">${getRarityText(b.rarity)}</div>
          <div class="role">${getRoleText(b.role)}</div>
          <div class="quote">"${b.quote}"</div>
        `;
        card.onclick = () => {
          lastScrollPosition = window.scrollY;
          displayBrawlerDetail(b);
        };
        const favBtn = card.querySelector(".fav-btn");
        favBtn.onclick = (e) => {
          e.stopPropagation();
          toggleFavorite(b.name);
          favBtn.classList.toggle("active");
        };
        return card;
      }

      function displayBrawlerDetail(b) {
        const lines = b.voicelines || [];
        const valid = lines.filter((l) => l.audioUrl);
        const img = b.iconUrl || `https://placehold.co/120x120?text=${b.name}`;
        const favVoicelines = getVoicelineFavorites();

        const videoHtml = b.tiktokEmbed
          ? `<div class="tiktok-special-view" style="margin-top: 30px; text-align: center;"><h3 style="color: var(--accent-primary); margin-bottom: 15px; border-bottom: 2px solid var(--accent-primary); display: inline-block; padding-bottom: 5px;">ğŸ¬ ã‚¹ãƒšã‚·ãƒ£ãƒ«å‹•ç”»è§£èª¬</h3><div style="display: flex; justify-content: center; background: #000; border-radius: 15px; padding: 10px;">${b.tiktokEmbed}</div></div>`
          : "";

        brawlerDetailContent.innerHTML = `
          <div class="brawler-detail-main-layout">
            <div class="brawler-detail-left">
              <img src="${img}" class="brawler-detail-icon">
              <h2 class="brawler-detail-name-jp">${b.name}</h2>
              <div class="brawler-detail-tags"><span class="rarity">${getRarityText(
                b.rarity
              )}</span><span class="role">${getRoleText(b.role)}</span></div>
              <div class="brawler-detail-primary-quote"><p class="quote-text">"${
                b.quote
              }"</p></div>
            </div>
            <div class="brawler-detail-right">
              <div class="detail-actions-box">
                ${
                  lines.length > 0
                    ? `<button id="play-all-master-btn">â–¶ å…¨éŸ³å£°å†ç”Ÿ</button><div style="display: flex; gap: 5px;"><button id="prev-track-btn" style="flex:1">â® å‰ã¸</button><button id="next-track-btn" style="flex:1">â­ æ¬¡ã¸</button></div><button id="shuffle-toggle-btn">ğŸ”€ OFF</button>`
                    : `<p style="color: var(--accent-primary);">éŸ³å£°æº–å‚™ä¸­...</p>`
                }
              </div>
              <button class="btn btn-secondary back-to-list-button" style="width: 100%;">ä¸€è¦§ã¸æˆ»ã‚‹</button>
            </div>
          </div>
          ${videoHtml}
          <div class="voicelines-section" ${
            lines.length === 0 ? 'style="display:none;"' : ""
          }>
            <h3>ã‚»ãƒªãƒ•ä¸€è¦§ (${valid.length}ä»¶)</h3>
            <div id="voiceline-list-container">
              ${lines
                .map((l) => {
                  const isVlFav = favVoicelines.includes(l.id);
                  return `<div class="voiceline-item" id="vl-item-${l.id}">
                  <button class="fav-btn voiceline-fav-btn ${
                    isVlFav ? "active" : ""
                  }" data-id="${l.id}">â™¥</button>
                  <div class="voiceline-main">
                    <div class="voiceline-quotes"><p class="quote-en">"${
                      l.quote
                    }"</p><p class="quote-jp">${l.translation}</p></div>
                    <div class="voiceline-actions"><button class="voiceline-play-btn" data-audio-src="${
                      l.audioUrl || ""
                    }" ${
                    !l.audioUrl ? "disabled" : ""
                  }>å†ç”Ÿ â–¶</button><button class="voiceline-toggle" data-target="${
                    l.id
                  }">è§£èª¬ â–¼</button></div>
                  </div>
                  <div class="voiceline-explanation" id="${l.id}">${
                    l.explanation
                  }</div>
                </div>`;
                })
                .join("")}
            </div>
          </div>`;

        if (b.tiktokEmbed) {
          const s = document.createElement("script");
          s.src = "https://www.tiktok.com/embed.js";
          document.body.appendChild(s);
        }

        // ç”»é¢åˆ‡ã‚Šæ›¿ãˆï¼šè©³ç´°ãƒšãƒ¼ã‚¸ã‚’è¡¨ç¤º
        document
          .querySelectorAll("main > .page-section")
          .forEach((s) => s.classList.add("hidden"));
        brawlerDetailPage.classList.remove("hidden");
        window.scrollTo({ top: 0, behavior: "instant" });

        setupDetailEvents(valid);
      }

      function setupDetailEvents(valid) {
        const playBtn = document.getElementById("play-all-master-btn");
        if (playBtn) {
          playBtn.onclick = () => {
            if (isSequentialPlaying) stopAllPlayback();
            else {
              playlist = isShuffle ? shuffleArray(valid) : [...valid];
              if (playlist.length > 0) playTrackByIndex(0);
            }
          };
        }
        const nextBtn = document.getElementById("next-track-btn");
        if (nextBtn) nextBtn.onclick = playNextTrack;
        const prevBtn = document.getElementById("prev-track-btn");
        if (prevBtn)
          prevBtn.onclick = () => {
            if (currentIndex > 0) {
              currentIndex--;
              playTrackByIndex(currentIndex);
            }
          };
        const shufBtn = document.getElementById("shuffle-toggle-btn");
        if (shufBtn)
          shufBtn.onclick = () => {
            isShuffle = !isShuffle;
            playlist = isShuffle ? shuffleArray(valid) : [...valid];
            updatePlayerUI();
          };

        document.querySelectorAll(".voiceline-toggle").forEach(
          (btn) =>
            (btn.onclick = () => {
              const exp = document.getElementById(btn.dataset.target);
              const isH =
                exp.style.display === "none" || exp.style.display === "";
              exp.style.display = isH ? "block" : "none";
              btn.innerText = isH ? "è§£èª¬ â–²" : "è§£èª¬ â–¼";
            })
        );

        document.querySelectorAll(".voiceline-fav-btn").forEach(
          (btn) =>
            (btn.onclick = (e) => {
              e.stopPropagation();
              const id = btn.dataset.id;
              toggleVoicelineFavorite(id);
              btn.classList.toggle("active");
            })
        );

        document.querySelectorAll(".voiceline-play-btn").forEach((btn) => {
          btn.onclick = (e) => {
            const url = e.target.dataset.audioSrc;
            if (!url) return;
            isSequentialPlaying = false;
            if (currentAudio) currentAudio.pause();
            currentAudio = new Audio(url);
            currentAudio.play();
          };
        });

        document.querySelectorAll(".back-to-list-button").forEach((btn) => {
          btn.onclick = () => {
            switchPage("home");
            window.scrollTo({ top: lastScrollPosition, behavior: "instant" });
          };
        });
      }

      // ----------------------------------------------------
      // 5. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆ¶å¾¡ï¼ˆæ—¢å­˜ã®æ©Ÿèƒ½ï¼‰
      // ----------------------------------------------------
      function shuffleArray(array) {
        const newArr = [...array];
        for (let i = newArr.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArr[i], newArr[j]] = [newArr[j], newArr[i]];
        }
        return newArr;
      }
      function playNextTrack() {
        if (!isSequentialPlaying) return;
        currentIndex++;
        if (currentIndex < playlist.length) playTrackByIndex(currentIndex);
        else stopAllPlayback();
      }
      function playTrackByIndex(index) {
        currentIndex = index;
        const track = playlist[currentIndex];
        if (!track || !track.audioUrl) return;
        if (currentAudio) {
          currentAudio.pause();
          currentAudio.currentTime = 0;
        }
        currentAudio = new Audio(track.audioUrl);
        document
          .querySelectorAll(".voiceline-item")
          .forEach((el) => el.classList.remove("playing"));
        const currentEl = document.getElementById(`vl-item-${track.id}`);
        if (currentEl) currentEl.classList.add("playing");
        document.getElementById("sticky-now-playing-text").innerText =
          track.quote;
        document.getElementById("sticky-audio-player").classList.add("visible");
        isSequentialPlaying = true;
        updatePlayerUI();
        currentAudio.play().catch((e) => console.error(e));
        currentAudio.onended = () => {
          if (isSequentialPlaying) playNextTrack();
        };
      }
      function stopAllPlayback() {
        isSequentialPlaying = false;
        if (currentAudio) currentAudio.pause();
        updatePlayerUI();
      }
      function updatePlayerUI() {
        const playBtn = document.getElementById("play-all-master-btn");
        const stickyPlayBtn = document.getElementById("sticky-play-pause");
        const shuffleBtn = document.getElementById("shuffle-toggle-btn");
        const icon = isSequentialPlaying ? "â¸" : "â–¶";
        if (playBtn)
          playBtn.innerText = isSequentialPlaying
            ? "â¸ ä¸€æ™‚åœæ­¢"
            : "â–¶ å…¨éŸ³å£°å†ç”Ÿ";
        if (stickyPlayBtn) stickyPlayBtn.innerText = icon;
        if (shuffleBtn) {
          shuffleBtn.innerText = isShuffle ? "ğŸ”€ ON" : "ğŸ”€ OFF";
          shuffleBtn.style.color = isShuffle
            ? "var(--accent-secondary)"
            : "var(--accent-primary)";
        }
      }

      function filterBrawlers() {
        const s = searchInput.value.toLowerCase().trim();
        const r = rarityFilter.value;
        const ro = roleFilter.value;
        const source = typeof brawlers !== "undefined" ? brawlers : [];
        filteredBrawlers = source.filter(
          (b) =>
            b.name.toLowerCase().includes(s) &&
            (!r || b.rarity === r) &&
            (!ro || b.role === ro)
        );
        const grid = document.getElementById("brawler-grid");
        const noRes = document.getElementById("no-results");
        grid.innerHTML = "";
        if (filteredBrawlers.length === 0) noRes.style.display = "block";
        else {
          noRes.style.display = "none";
          filteredBrawlers.forEach((b) =>
            grid.appendChild(createBrawlerCard(b))
          );
        }
      }

      // ----------------------------------------------------
      // 6. åˆæœŸåŒ–ï¼ˆãƒšãƒ¼ã‚¸ã®æº–å‚™ï¼‰
      // ----------------------------------------------------
      document.addEventListener("DOMContentLoaded", () => {
        // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒœã‚¿ãƒ³è¨­å®š
        document.querySelectorAll(".nav-link").forEach((link) => {
          link.addEventListener("click", (e) => {
            const target = link.dataset.target;
            switchPage(target);
          });
        });

        // ãŠæ°—ã«å…¥ã‚Šãƒšãƒ¼ã‚¸ã®ã‚¤ãƒ™ãƒ³ãƒˆ
        favSearchInput.addEventListener("input", renderFavoritesPage);
        showVoicelinesOnlyCheckbox.addEventListener(
          "change",
          renderFavoritesPage
        );

        if (searchInput) searchInput.oninput = filterBrawlers;
        if (rarityFilter) rarityFilter.onchange = filterBrawlers;
        if (roleFilter) roleFilter.onchange = filterBrawlers;

        const themeToggleButton = document.createElement("button");
        themeToggleButton.id = "theme-toggle-btn";
        document.body.appendChild(themeToggleButton);
        const currentTheme = localStorage.getItem("theme");
        if (currentTheme === "light") {
          document.body.classList.add("light-theme");
          themeToggleButton.innerHTML = "ğŸŒ™";
        } else {
          themeToggleButton.innerHTML = "â˜€ï¸";
        }
        themeToggleButton.onclick = () => {
          document.body.classList.toggle("light-theme");
          let t = document.body.classList.contains("light-theme")
            ? "light"
            : "dark";
          themeToggleButton.innerHTML = t === "light" ? "ğŸŒ™" : "â˜€ï¸";
          localStorage.setItem("theme", t);
        };

        document.getElementById("sticky-play-pause").onclick = () => {
          if (isSequentialPlaying) stopAllPlayback();
          else if (currentAudio) {
            isSequentialPlaying = true;
            currentAudio.play();
            updatePlayerUI();
          }
        };
        document.getElementById("sticky-next").onclick = playNextTrack;
        document.getElementById("sticky-prev").onclick = () => {
          if (currentIndex > 0) {
            currentIndex--;
            playTrackByIndex(currentIndex);
          }
        };
        document.getElementById("sticky-shuffle").onclick = () => {
          isShuffle = !isShuffle;
          updatePlayerUI();
        };

        // â–¼â–¼â–¼ ãƒšãƒ¼ã‚¸ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ ï¼† ãƒ˜ãƒƒãƒ€ãƒ¼ã®å¤‰å½¢ï¼ˆã“ã“ã‚’ä¿®æ­£ï¼‰ â–¼â–¼â–¼
        const pageTopBtn = document.createElement("div");
        pageTopBtn.id = "page-top-btn";
        pageTopBtn.innerHTML = "â–²";
        document.body.appendChild(pageTopBtn);

        // â˜…ã“ã“ãŒé‡è¦ï¼ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æ™‚ã®å‹•ãã‚’ã¾ã¨ã‚ã¦æ›¸ãã¾ã™
        window.onscroll = () => {
          // 1. ãƒˆãƒƒãƒ—ã¸æˆ»ã‚‹ãƒœã‚¿ãƒ³ã®è¡¨ç¤ºãƒ»éè¡¨ç¤º
          pageTopBtn.classList.toggle("visible", window.scrollY > 300);

          // 2. ãƒ˜ãƒƒãƒ€ãƒ¼ã®ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ–ï¼ˆ50pxä»¥ä¸Šã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ã—ãŸã‚‰ç™ºå‹•ï¼‰
          const header = document.querySelector("header");
          if (window.scrollY > 50) {
            header.classList.add("scrolled");
          } else {
            header.classList.remove("scrolled");
          }
        };

        pageTopBtn.onclick = () =>
          window.scrollTo({ top: 0, behavior: "smooth" });

        if (typeof brawlers !== "undefined") filterBrawlers();
        embedTikTokVideo("7507203728039070996", "tiktok-video-1");
      });

      function embedTikTokVideo(videoId, targetElementId) {
        const targetElement = document.getElementById(targetElementId);
        if (targetElement) {
          targetElement.style.backgroundColor = "#1f1f1f";
          targetElement.innerHTML = `<blockquote class="tiktok-embed" cite="https://www.tiktok.com/@bion329/video/${videoId}" data-video-id="${videoId}" style="max-width: 605px;min-width: 325px;"><section><a target="_blank" title="@bion329" href="https://www.tiktok.com/@bion329?refer=embed">@bion329</a></section></blockquote>`;
        }
      }
    </script>
  </body>
</html>
